(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else if (typeof exports === 'object') exports['loaders'] = factory();
  else root['loaders'] = factory();})(globalThis, function () {
"use strict";var __exports__=(()=>{var Zt=Object.create;var R=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Qt=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty;var re=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var se=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ae=(e,t)=>{for(var r in t)R(e,r,{get:t[r],enumerable:!0})},M=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Qt(t))!ee.call(e,a)&&a!==r&&R(e,a,{get:()=>t[a],enumerable:!(s=Kt(t,a))||s.enumerable});return e},U=(e,t,r)=>(M(e,t,"default"),r&&M(r,t,"default")),ne=(e,t,r)=>(r=e!=null?Zt(te(e)):{},M(t||!e||!e.__esModule?R(r,"default",{value:e,enumerable:!0}):r,e)),oe=e=>M(R({},"__esModule",{value:!0}),e);var Et=(e,t,r)=>(re(e,typeof t!="symbol"?t+"":t,r),r);var Ct=se((Ae,Bt)=>{Bt.exports=globalThis.loaders});var C={};ae(C,{ArrowLikeDataType:()=>m,ArrowLikeField:()=>p,ArrowLikeSchema:()=>d,ArrowLikeTable:()=>P,AsyncQueue:()=>B,Binary:()=>at,Bool:()=>H,ColumnarTableBatchAggregator:()=>S,Date:()=>j,DateDay:()=>ot,DateMillisecond:()=>it,FixedSizeList:()=>gt,Float:()=>x,Float16:()=>et,Float32:()=>rt,Float64:()=>st,Int:()=>f,Int16:()=>J,Int32:()=>G,Int64:()=>X,Int8:()=>V,Interval:()=>O,IntervalDayTime:()=>ft,IntervalYearMonth:()=>pt,Null:()=>q,RowTableBatchAggregator:()=>A,Struct:()=>wt,TableBatchBuilder:()=>F,Time:()=>T,TimeMillisecond:()=>lt,TimeSecond:()=>ct,Timestamp:()=>b,TimestampMicrosecond:()=>mt,TimestampMillisecond:()=>ht,TimestampNanosecond:()=>dt,TimestampSecond:()=>ut,Uint16:()=>K,Uint32:()=>Q,Uint64:()=>tt,Uint8:()=>Z,Utf8:()=>nt,convertTable:()=>Ht,convertToArrayRow:()=>L,convertToObjectRow:()=>v,deduceMeshField:()=>Tt,deduceMeshSchema:()=>Gt,deduceTableSchema:()=>w,getDataTypeFromArray:()=>Y,getMeshBoundingBox:()=>Jt,getMeshSize:()=>Vt,getTableCell:()=>I,getTableColumnIndex:()=>xt,getTableColumnName:()=>vt,getTableLength:()=>h,getTableNumCols:()=>$,getTableRowAsArray:()=>E,getTableRowAsObject:()=>N,getTableRowShape:()=>kt,getTypeInfo:()=>Xt,isTable:()=>Ut,makeArrayRowIterator:()=>At,makeBatchFromTable:()=>Yt,makeMeshAttributeMetadata:()=>Ot,makeObjectRowIterator:()=>St,makeRowIterator:()=>Lt,makeTableFromBatches:()=>Pt,makeTableFromData:()=>Wt});U(C,ne(Ct(),1));var k=class{schema;options;shape;length=0;rows=null;cursor=0;_headers=[];constructor(t,r){if(this.options=r,this.schema=t,!Array.isArray(t)){this._headers=[];for(let s in t)this._headers[t[s].index]=t[s].name}}rowCount(){return this.length}addArrayRow(t,r){Number.isFinite(r)&&(this.cursor=r),this.shape="array-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}addObjectRow(t,r){Number.isFinite(r)&&(this.cursor=r),this.shape="object-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}};function v(e,t){if(!e)throw new Error("null row");let r={};if(t)for(let s=0;s<t.length;s++)r[t[s]]=e[s];else for(let s=0;s<e.length;s++){let a=`column-${s}`;r[a]=e[s]}return r}function L(e,t){if(!e)throw new Error("null row");if(t){let r=new Array(t.length);for(let s=0;s<t.length;s++)r[s]=e[t[s]];return r}return Object.values(e)}function Dt(e){let t=[];for(let r=0;r<e.length;r++){let s=`column-${r}`;t.push(s)}return t}function _t(e){return Object.keys(e)}var Mt=100,A=class{schema;options;length=0;objectRows=null;arrayRows=null;cursor=0;_headers=null;constructor(t,r){if(this.options=r,this.schema=t,t){this._headers=[];for(let s in t)this._headers[t[s].index]=t[s].name}}rowCount(){return this.length}addArrayRow(t,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||=Dt(t),this.options.shape){case"object-row-table":let s=v(t,this._headers);this.addObjectRow(s,r);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(Mt),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||=_t(t),this.options.shape){case"array-row-table":let s=L(t,this._headers);this.addArrayRow(s,r);break;case"object-row-table":this.objectRows=this.objectRows||new Array(Mt),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}};var S=class{schema;length=0;allocated=0;columns={};constructor(t,r){this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let r=0;for(let s in this.columns)this.columns[s][this.length]=t[r++];this.length++}addObjectRow(t){this._reallocateColumns();for(let r in t)this.columns[r][this.length]=t[r];this.length++}getBatch(){this._pruneColumns();let t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(let s in this.schema){let a=this.schema[s];t[a.name]=this.columns[a.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={};for(let t in this.schema){let r=this.schema[t],s=r.type||Float32Array,a=this.columns[r.index];if(a&&ArrayBuffer.isView(a)){let u=new s(this.allocated);u.set(a),this.columns[r.index]=u}else a?(a.length=this.allocated,this.columns[r.index]=a):this.columns[r.index]=new s(this.allocated)}}}_pruneColumns(){for(let[t,r]of Object.entries(this.columns))this.columns[t]=r.slice(0,this.length)}};var ie={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},ce="TableBatchBuilder",z=class{schema;options;aggregator=null;batchCount=0;bytesUsed=0;isChunkComplete=!1;lastBatchEmittedMs=Date.now();totalLength=0;totalBytes=0;rowBytes=0;constructor(t,r){this.schema=t,this.options={...ie,...r}}limitReached(){return!!(Boolean(this.options?.limit)&&this.totalLength>=this.options.limit||Boolean(this.options?._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){let r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){let r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t?.bytesUsed&&(this.bytesUsed=t.bytesUsed);let r=this.aggregator.getBatch();return r.count=this.batchCount,r.bytesUsed=this.bytesUsed,Object.assign(r,t),this.batchCount++,this.aggregator=null,r}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return A;case"columnar-table":return S;case"arrow-table":if(!z.ArrowBatch)throw new Error(ce);return z.ArrowBatch;default:return k}}},F=z;Et(F,"ArrowBatch");function Ut(e){switch(typeof e=="object"&&e?.shape){case"array-row-table":case"object-row-table":return Array.isArray(e.data);case"geojson-table":return Array.isArray(e.features);case"columnar-table":return e.data&&typeof e.data=="object";case"arrow-table":return Boolean(e?.data?.numRows!==void 0);default:return!1}}function h(e){switch(e.shape){case"array-row-table":case"object-row-table":return e.data.length;case"geojson-table":return e.features.length;case"arrow-table":return e.data.numRows;case"columnar-table":for(let r of Object.values(e.data))return r.length||0;return 0;default:throw new Error("table")}}function $(e){if(e.schema)return e.schema.fields.length;if(h(e)===0)throw new Error("empty table");switch(e.shape){case"array-row-table":return e.data[0].length;case"object-row-table":return Object.keys(e.data[0]).length;case"geojson-table":return Object.keys(e.features[0]).length;case"columnar-table":return Object.keys(e.data).length;case"arrow-table":return e.data.numCols;default:throw new Error("table")}}function I(e,t,r){switch(e.shape){case"array-row-table":let s=xt(e,r);return e.data[t][s];case"object-row-table":return e.data[t][r];case"geojson-table":return e.features[t][r];case"columnar-table":return e.data[r][t];case"arrow-table":let u=e.data,c=u.schema.fields.findIndex(l=>l.name===r);return u.getChildAt(c)?.get(t);default:throw new Error("todo")}}function kt(e){switch(e.shape){case"array-row-table":case"object-row-table":return e.shape;case"geojson-table":return"object-row-table";case"columnar-table":default:throw new Error("Not a row table")}}function xt(e,t){let r=e.schema?.fields.findIndex(s=>s.name===t);if(r===void 0)throw new Error(t);return r}function vt(e,t){let r=e.schema?.fields[t]?.name;if(!r)throw new Error(`${t}`);return r}function N(e,t,r,s){switch(e.shape){case"object-row-table":return s?Object.fromEntries(Object.entries(e.data[t])):e.data[t];case"array-row-table":if(e.schema){let n=r||{};for(let o=0;o<e.schema.fields.length;o++)n[e.schema.fields[o].name]=e.data[t][o];return n}throw new Error("no schema");case"geojson-table":if(e.schema){let n=r||{};for(let o=0;o<e.schema.fields.length;o++)n[e.schema.fields[o].name]=e.features[t][o];return n}throw new Error("no schema");case"columnar-table":if(e.schema){let n=r||{};for(let o=0;o<e.schema.fields.length;o++)n[e.schema.fields[o].name]=e.data[e.schema.fields[o].name][t];return n}else{let n=r||{};for(let[o,g]of Object.entries(e.data))n[o]=g[t];return n}case"arrow-table":let a=e.data,u=r||{},c=a.get(t),l=a.schema;for(let n=0;n<l.fields.length;n++)u[l.fields[n].name]=c?.[l.fields[n].name];return u;default:throw new Error("shape")}}function E(e,t,r,s){switch(e.shape){case"array-row-table":return s?Array.from(e.data[t]):e.data[t];case"object-row-table":if(e.schema){let n=r||[];for(let o=0;o<e.schema.fields.length;o++)n[o]=e.data[t][e.schema.fields[o].name];return n}return Object.values(e.data[t]);case"geojson-table":if(e.schema){let n=r||[];for(let o=0;o<e.schema.fields.length;o++)n[o]=e.features[t][e.schema.fields[o].name];return n}return Object.values(e.features[t]);case"columnar-table":if(e.schema){let n=r||[];for(let o=0;o<e.schema.fields.length;o++)n[o]=e.data[e.schema.fields[o].name][t];return n}else{let n=r||[],o=0;for(let g of Object.values(e.data))n[o]=g[t],o++;return n}case"arrow-table":let a=e.data,u=r||[],c=a.get(t),l=a.schema;for(let n=0;n<l.fields.length;n++)u[n]=c?.[l.fields[n].name];return u;default:throw new Error("shape")}}function*Lt(e,t){switch(t){case"array-row-table":yield*At(e);break;case"object-row-table":yield*St(e);break;default:throw new Error(`Unknown row type ${t}`)}}function*At(e,t=[]){let r=h(e);for(let s=0;s<r;s++)yield E(e,s,t)}function*St(e,t={}){let r=h(e);for(let s=0;s<r;s++)yield N(e,s,t)}var p=class{name;type;nullable;metadata;constructor(t,r,s=!1,a=new Map){this.name=t,this.type=r,this.nullable=s,this.metadata=a}get typeId(){return this.type&&this.type.typeId}clone(){return new p(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return`${JSON.stringify(this.type)}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${JSON.stringify(this.metadata)}`:""}`}};var d=class{fields;metadata;constructor(t,r=new Map){this.fields=t.map(s=>new p(s.name,s.type,s.nullable,s.metadata)),this.metadata=r instanceof Map?r:new Map(Object.entries(r))}compareTo(t){if(this.metadata!==t.metadata||this.fields.length!==t.fields.length)return!1;for(let r=0;r<this.fields.length;++r)if(!this.fields[r].compareTo(t.fields[r]))return!1;return!0}select(...t){let r=Object.create(null);for(let a of t)r[a]=!0;let s=this.fields.filter(a=>r[a.name]);return new d(s,this.metadata)}selectAt(...t){let r=t.map(s=>this.fields[s]).filter(Boolean);return new d(r,this.metadata)}assign(t){let r,s=this.metadata;if(t instanceof d){let c=t;r=c.fields,s=zt(zt(new Map,this.metadata),c.metadata)}else r=t;let a=Object.create(null);for(let c of this.fields)a[c.name]=c;for(let c of r)a[c.name]=c;let u=Object.values(a);return new d(u,s)}};function zt(e,t){return new Map([...e||new Map,...t||new Map])}function W(e,t="float32"){return e instanceof Date?"date-millisecond":e instanceof Number?t:typeof e=="string"?"utf8":(e===null||e==="undefined","null")}function Y(e){let t=It(e);return t!=="null"?{type:t,nullable:!1}:e.length>0?(t=W(e[0]),{type:t,nullable:!0}):{type:"null",nullable:!0}}function It(e){switch(e.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function $t(e,t){if(!t)switch(e){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:break}return Array}function w(e){switch(e.shape){case"array-row-table":case"object-row-table":return ue(e.data);case"columnar-table":return le(e.data);case"arrow-table":default:throw new Error("Deduce schema")}}function le(e){let t=[];for(let[r,s]of Object.entries(e)){let a=he(s,r);t.push(a)}return{fields:t,metadata:{}}}function ue(e){if(!e.length)throw new Error("deduce from empty table");let t=[],r=e[0];for(let[s,a]of Object.entries(r))t.push(me(a,s));return{fields:t,metadata:{}}}function he(e,t){if(ArrayBuffer.isView(e)){let r=Y(e);return{name:t,type:r.type||"null",nullable:r.nullable}}if(Array.isArray(e)&&e.length>0){let r=e[0],s=W(r);return{name:t,type:s,nullable:!0}}throw new Error("empty table")}function me(e,t){let r=W(e);return{name:t,type:r,nullable:!0}}var jt=class{table;columnName;constructor(t,r){this.table=t,this.columnName=r}get(t){return I(this.table,t,this.columnName)}toArray(){switch(this.table.shape){case"arrow-table":return this.table.data.getChild(this.columnName)?.toArray();case"columnar-table":return this.table.data[this.columnName];default:throw new Error(this.table.shape)}}},P=class{schema;table;constructor(t){let r=t.schema||w(t);this.schema=new d(r.fields,r.metadata),this.table={...t,schema:r}}get data(){return this.table.shape==="geojson-table"?this.table.features:this.table.data}get numCols(){return $(this.table)}get length(){return h(this.table)}getChild(t){return new jt(this.table,t)}};function Wt(e){let t;switch(de(e)){case"array-row-table":t={shape:"array-row-table",data:e};break;case"object-row-table":t={shape:"object-row-table",data:e};break;case"columnar-table":t={shape:"columnar-table",data:e};break;default:throw new Error("table")}let r=w(t);return{...t,schema:r}}function de(e){if(Array.isArray(e)){if(e.length===0)throw new Error("cannot deduce type of empty table");let t=e[0];if(Array.isArray(t))return"array-row-table";if(t&&typeof t=="object")return"object-row-table"}if(e&&typeof e=="object")return"columnar-table";throw new Error("invalid table")}function Yt(e){return{...e,length:h(e),batchType:"data"}}async function Pt(e){let t,r,s,a=null,u;for await(let c of e)switch(a=a||c.shape,u=u||c.schema,c.shape){case"array-row-table":t=t||[];for(let l=0;l<h(c);l++){let n=c.data[l];t.push(n)}break;case"object-row-table":r=r||[];for(let l=0;l<h(c);l++){let n=c.data[l];r.push(n)}break;case"geojson-table":s=s||[];for(let l=0;l<h(c);l++){let n=c.features[l];s.push(n)}break;case"columnar-table":case"arrow-table":default:throw new Error("shape")}if(!a)return null;switch(a){case"array-row-table":return{shape:"array-row-table",data:t,schema:u};case"object-row-table":return{shape:"object-row-table",data:r,schema:u};case"geojson-table":return{shape:"geojson-table",type:"FeatureCollection",features:s,schema:u};default:return null}}function qt(e,t){let r=$t(e.type,e.nullable);return new r(t)}function Ht(e,t){switch(t){case"object-row-table":return we(e);case"array-row-table":return ge(e);case"columnar-table":return pe(e);case"arrow-table":return fe(e);default:throw new Error(t)}}function fe(e){let t=globalThis.__loaders?._makeArrowTable;if(!t)throw new Error("");return t(e)}function pe(e){let t=e.schema||w(e),r=e.schema?.fields||[];if(e.shape==="columnar-table")return{...e,schema:t};let s=h(e),a={};for(let u of r){let c=qt(u,s);a[u.name]=c;for(let l=0;l<s;l++)c[l]=I(e,l,u.name)}return{shape:"columnar-table",schema:t,data:a}}function ge(e){if(e.shape==="array-row-table")return e;let t=h(e),r=new Array(t);for(let s=0;s<t;s++)r[s]=E(e,s);return{shape:"array-row-table",schema:e.schema,data:r}}function we(e){if(e.shape==="object-row-table")return e;let t=h(e),r=new Array(t);for(let s=0;s<t;s++)r[s]=N(e,s);return{shape:"object-row-table",schema:e.schema,data:r}}function Vt(e){let t=0;for(let r in e){let s=e[r];ArrayBuffer.isView(s)&&(t+=s.byteLength*s.BYTES_PER_ELEMENT)}return t}function Jt(e){let t=1/0,r=1/0,s=1/0,a=-1/0,u=-1/0,c=-1/0,l=e.POSITION?e.POSITION.value:[],n=l&&l.length;for(let o=0;o<n;o+=3){let g=l[o],D=l[o+1],_=l[o+2];t=g<t?g:t,r=D<r?D:r,s=_<s?_:s,a=g>a?g:a,u=D>u?D:u,c=_>c?_:c}return[[t,r,s],[a,u,c]]}function Gt(e,t={}){return{fields:be(e),metadata:t}}function Tt(e,t,r){let s=It(t.value),a=r||Ot(t);return{name:e,type:{type:"fixed-size-list",listSize:t.size,children:[{name:"value",type:s}]},nullable:!1,metadata:a}}function be(e){let t=[];for(let r in e){let s=e[r];t.push(Tt(r,s))}return t}function Ot(e){let t={};return"byteOffset"in e&&(t.byteOffset=e.byteOffset.toString(10)),"byteStride"in e&&(t.byteStride=e.byteStride.toString(10)),"normalized"in e&&(t.normalized=e.normalized.toString()),t}var i;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(i||(i={}));var m=class{static isNull(t){return t&&t.typeId===i.Null}static isInt(t){return t&&t.typeId===i.Int}static isFloat(t){return t&&t.typeId===i.Float}static isBinary(t){return t&&t.typeId===i.Binary}static isUtf8(t){return t&&t.typeId===i.Utf8}static isBool(t){return t&&t.typeId===i.Bool}static isDecimal(t){return t&&t.typeId===i.Decimal}static isDate(t){return t&&t.typeId===i.Date}static isTime(t){return t&&t.typeId===i.Time}static isTimestamp(t){return t&&t.typeId===i.Timestamp}static isInterval(t){return t&&t.typeId===i.Interval}static isList(t){return t&&t.typeId===i.List}static isStruct(t){return t&&t.typeId===i.Struct}static isUnion(t){return t&&t.typeId===i.Union}static isFixedSizeBinary(t){return t&&t.typeId===i.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===i.FixedSizeList}static isMap(t){return t&&t.typeId===i.Map}static isDictionary(t){return t&&t.typeId===i.Dictionary}get typeId(){return i.NONE}compareTo(t){return this===t}},q=class extends m{get typeId(){return i.Null}get[Symbol.toStringTag](){return"Null"}toString(){return"Null"}},H=class extends m{get typeId(){return i.Bool}get[Symbol.toStringTag](){return"Bool"}toString(){return"Bool"}},f=class extends m{isSigned;bitWidth;constructor(t,r){super(),this.isSigned=t,this.bitWidth=r}get typeId(){return i.Int}get[Symbol.toStringTag](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}},V=class extends f{constructor(){super(!0,8)}},J=class extends f{constructor(){super(!0,16)}},G=class extends f{constructor(){super(!0,32)}},X=class extends f{constructor(){super(!0,64)}},Z=class extends f{constructor(){super(!1,8)}},K=class extends f{constructor(){super(!1,16)}},Q=class extends f{constructor(){super(!1,32)}},tt=class extends f{constructor(){super(!1,64)}},Rt={HALF:16,SINGLE:32,DOUBLE:64},x=class extends m{precision;constructor(t){super(),this.precision=t}get typeId(){return i.Float}get[Symbol.toStringTag](){return"Float"}toString(){return`Float${this.precision}`}},et=class extends x{constructor(){super(Rt.HALF)}},rt=class extends x{constructor(){super(Rt.SINGLE)}},st=class extends x{constructor(){super(Rt.DOUBLE)}},at=class extends m{constructor(){super()}get typeId(){return i.Binary}toString(){return"Binary"}get[Symbol.toStringTag](){return"Binary"}},nt=class extends m{get typeId(){return i.Utf8}get[Symbol.toStringTag](){return"Utf8"}toString(){return"Utf8"}},Ft={DAY:0,MILLISECOND:1},j=class extends m{unit;constructor(t){super(),this.unit=t}get typeId(){return i.Date}get[Symbol.toStringTag](){return"Date"}toString(){return`Date${(this.unit+1)*32}<${Ft[this.unit]}>`}},ot=class extends j{constructor(){super(Ft.DAY)}},it=class extends j{constructor(){super(Ft.MILLISECOND)}},y={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9},T=class extends m{unit;bitWidth;constructor(t,r){super(),this.unit=t,this.bitWidth=r}get typeId(){return i.Time}toString(){return`Time${this.bitWidth}<${y[this.unit]}>`}get[Symbol.toStringTag](){return"Time"}},ct=class extends T{constructor(){super(y.SECOND,32)}},lt=class extends T{constructor(){super(y.MILLISECOND,32)}},b=class extends m{unit;timezone;constructor(t,r=null){super(),this.unit=t,this.timezone=r}get typeId(){return i.Timestamp}get[Symbol.toStringTag](){return"Timestamp"}toString(){return`Timestamp<${y[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}},ut=class extends b{constructor(t=null){super(y.SECOND,t)}},ht=class extends b{constructor(t=null){super(y.MILLISECOND,t)}},mt=class extends b{constructor(t=null){super(y.MICROSECOND,t)}},dt=class extends b{constructor(t=null){super(y.NANOSECOND,t)}},Nt={DAY_TIME:0,YEAR_MONTH:1},O=class extends m{unit;constructor(t){super(),this.unit=t}get typeId(){return i.Interval}get[Symbol.toStringTag](){return"Interval"}toString(){return`Interval<${Nt[this.unit]}>`}},ft=class extends O{constructor(){super(Nt.DAY_TIME)}},pt=class extends O{constructor(){super(Nt.YEAR_MONTH)}},gt=class extends m{listSize;children;constructor(t,r){super(),this.listSize=t,this.children=[r]}get typeId(){return i.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Symbol.toStringTag](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${JSON.stringify(this.valueType)}>`}},wt=class extends m{children;constructor(t){super(),this.children=t}get typeId(){return i.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${JSON.stringify(t.type)}`).join(", ")}}>`}get[Symbol.toStringTag](){return"Struct"}};function Xt(e){return{typeId:e.typeId,ArrayType:e.ArrayType,typeName:e.toString(),typeEnumName:ye(e.typeId),precision:e.precision}}var bt=null;function ye(e){if(!bt){bt={};for(let t in i)bt[i[t]]=t}return bt[e]}var yt=class extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}},B=class{_values;_settlers;_closed;constructor(){this._values=new yt,this._settlers=new yt,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");let r=this._settlers.dequeue();t instanceof Error?r.reject(t):r.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){let t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,r)=>{this._settlers.enqueue({resolve:t,reject:r})})}};return oe(C);})();
      return __exports__;
      });
